<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Day 64: Floating-Point Arithmetic</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Source+Serif+4:opsz,wght@8..60,400;8..60,600;8..60,700&family=DM+Sans:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../shared-styles.css">
    <script>(function () { const t = localStorage.getItem('math_cs_theme') || (window.matchMedia('(prefers-color-scheme:dark)').matches ? 'dark' : 'light'); document.documentElement.setAttribute('data-theme', t); })();</script>
</head>

<body>
    <nav class="nav">
        <div class="nav-inner">
            <a href="../../index.html" class="nav-back">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M10 12L6 8L10 4" />
                </svg>
                Back to Curriculum
            </a>
            <div class="nav-progress">
                <span id="progressText">0 / 10 complete</span>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme"></button>
        </div>
    </nav>

    <header class="hero">
        <div class="hero-label">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 0L10 6H16L11 9.5L13 16L8 12L3 16L5 9.5L0 6H6L8 0Z" />
            </svg>
            Day 64 · Numerical Methods
        </div>
        <h1>Floating-Point Arithmetic</h1>
        <p class="hero-desc">IEEE 754, machine epsilon, and numerical precision.</p>
    </header>

    <div class="main-layout">
        <aside class="sidebar">
            <nav class="toc">
                <div class="toc-title">On this page</div>
                <ul class="toc-list">
                    <li><a href="#ieee" class="toc-link">1. IEEE 754</a></li>
                    <li><a href="#precision" class="toc-link">2. Precision Issues</a></li>
                    <li><a href="#practice" class="toc-link">3. Best Practices</a></li>
                    <li><a href="#videos" class="toc-link">4. Video Lessons</a></li>
                    <li><a href="#quiz" class="toc-link">5. Practice</a></li>
                </ul>
            </nav>
            <div class="stats-card">
                <div class="toc-title">Your Progress</div>
                <div class="stats-row"><span class="stats-label">Attempted</span><span class="stats-value"
                        id="statAttempted">0</span></div>
                <div class="stats-row"><span class="stats-label">Correct</span><span class="stats-value"
                        id="statCorrect">0</span></div>
                <div class="stats-row"><span class="stats-label">Accuracy</span><span class="stats-value"
                        id="statAccuracy">—</span></div>
            </div>
        </aside>

        <main class="content">
            <section class="section" id="ieee">
                <div class="section-header">
                    <div class="section-number">Section 1</div>
                    <h2 class="section-title">IEEE 754 Standard</h2>
                </div>
                <div class="section-body">
                    <div class="math-block">FLOATING-POINT FORMAT:
                        (-1)ˢ × 1.mantissa × 2^(exponent - bias)

                        SINGLE PRECISION (32-bit):
                        • 1 sign bit
                        • 8 exponent bits (bias = 127)
                        • 23 mantissa bits
                        • ~7 decimal digits precision

                        DOUBLE PRECISION (64-bit):
                        • 1 sign bit
                        • 11 exponent bits (bias = 1023)
                        • 52 mantissa bits
                        • ~16 decimal digits precision

                        SPECIAL VALUES:
                        • ±0, ±∞, NaN</div>
                </div>
            </section>

            <section class="section" id="precision">
                <div class="section-header">
                    <div class="section-number">Section 2</div>
                    <h2 class="section-title">Precision Issues</h2>
                </div>
                <div class="section-body">
                    <div class="math-block">MACHINE EPSILON:
                        ε_mach = smallest ε where 1 + ε ≠ 1
                        • float: ~1.2 × 10⁻⁷
                        • double: ~2.2 × 10⁻¹⁶

                        COMMON PROBLEMS:
                        • 0.1 + 0.2 ≠ 0.3 (exactly)
                        • Catastrophic cancellation
                        • Overflow/underflow</div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-lang">Python</span>
                            <span class="code-label">Floating-point surprise</span>
                        </div>
                        <div class="code-content">
                            <pre>&gt;&gt;&gt; <span class="code-number">0.1</span> + <span class="code-number">0.2</span>
<span class="code-number">0.30000000000000004</span>

&gt;&gt;&gt; <span class="code-number">0.1</span> + <span class="code-number">0.2</span> == <span class="code-number">0.3</span>
<span class="code-keyword">False</span>

<span class="code-comment"># Use math.isclose() instead!</span></pre>
                        </div>
                    </div>

                    <div class="warning"><strong>Never compare floats with ==</strong> Use tolerance: |a - b| < ε</div>
                    </div>
            </section>

            <section class="section" id="practice">
                <div class="section-header">
                    <div class="section-number">Section 3</div>
                    <h2 class="section-title">Best Practices</h2>
                </div>
                <div class="section-body">
                    <div class="math-block">1. Use relative tolerance: |a-b|/max(|a|,|b|) < tol 2. Avoid subtracting
                            nearly equal numbers 3. Use Kahan summation for many additions 4. Be aware of operation
                            order 5. Use higher precision when needed (e.g., Decimal) 6. Validate numerical
                            stability</div>
                    </div>
            </section>

            <section class="section" id="videos">
                <div class="section-header">
                    <div class="section-number">Section 4</div>
                    <h2 class="section-title">Video Lessons</h2>
                </div>
                <div class="section-body">
                    <div class="video-container">
                        <div class="video-player">
                            <iframe id="ytPlayer" src=""
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                allowfullscreen></iframe>
                            <div class="video-info">
                                <div class="video-title" id="videoTitle">Select a video to start</div>
                                <div class="video-meta" id="videoMeta"></div>
                            </div>
                        </div>
                        <div class="video-list" id="videoList"></div>
                    </div>
                </div>
            </section>

            <section class="section" id="quiz">
                <div class="section-header">
                    <div class="section-number">Section 5</div>
                    <h2 class="section-title">Practice Problems</h2>
                </div>
                <div class="section-body">
                    <div class="quiz-controls">
                        <button class="btn btn-primary" id="btnCheckAll">Check All</button>
                        <button class="btn" id="btnRevealAll">Reveal All</button>
                        <button class="btn" id="btnClear">Clear Inputs</button>
                        <button class="btn btn-danger" id="btnReset">Reset Stats</button>
                    </div>
                    <div id="quizContainer"></div>
                </div>
            </section>
        </main>
    </div>

    <script src="../shared-scripts.js"></script>
    <script>
        const VIDEO_GROUPS = [
            {
                title: "Floating Point",
                items: [
                    { title: "Floating Point Numbers", channel: "Computerphile", vid: "PZRI1IfStY0" },
                    { title: "IEEE 754 Explained", channel: "Ben Eater", vid: "dQhj5RGtag0" },
                ]
            }
        ];
        const QUESTIONS = [
            { topic: "IEEE", prompt: "IEEE ___ is the floating-point standard", answer: "754" },
            { topic: "Bits", prompt: "Double precision uses ___ bits", answer: "64" },
            { topic: "Bits", prompt: "Single precision uses ___ bits", answer: "32" },
            { topic: "Epsilon", prompt: "Machine ___ is smallest ε where 1+ε ≠ 1", answer: "epsilon" },
            { topic: "Problem", prompt: "0.1 + 0.2 == 0.3 returns ___", answer: "false" },
            { topic: "Compare", prompt: "Use ___ instead of == for floats", answer: "tolerance", altAnswers: ["isclose", "epsilon"] },
            { topic: "Cancellation", prompt: "___ cancellation: subtracting nearly equal numbers", answer: "catastrophic" },
            { topic: "Special", prompt: "Not a Number = ___", answer: "nan" },
            { topic: "Precision", prompt: "Double has ~___ decimal digits precision", answer: "16" },
            { topic: "Summation", prompt: "___ summation reduces rounding error", answer: "kahan" },
        ];
        initLesson({ videos: VIDEO_GROUPS, questions: QUESTIONS, storageKey: 'day64_float_v1' });
    </script>
</body>

</html>